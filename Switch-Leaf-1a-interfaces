# This file describes the network interfaces available on your system
# and how to activate them. For more information, see interfaces(5).

source /etc/network/interfaces.d/*.intf

# The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
auto eth0
iface eth0 inet dhcp

auto swp49
iface swp49
    address 10.217.182.1/24

auto swp50
iface swp50
    address 10.217.182.2/24

auto stor-a
iface stor-a
   bond-slaves swp17

auto stor-b
iface stor-b
   bond-slaves swp18

auto stor-a40
iface stor-a40
   bond-slaves swp52

auto stor-b40
iface stor-b40
   bond-slaves swp53 

#  MLAG/CLAG config...
auto peerlink
iface peerlink
    bond-slaves swp13 swp14

auto peerlink.4094
iface peerlink.4094
    address 169.254.255.1
    netmask 255.255.255.0
    clagd-priority 4096
    clagd-peer-ip 169.254.255.2
    clagd-backup-ip 10.0.0.12
    clagd-sys-mac 44:38:39:ff:00:01

# bridge to hosts
auto swp1
iface swp1

auto node1
iface node1
    bond-slaves swp1
    clag-id 1

auto swp2
iface swp2

auto node2
iface node2
    bond-slaves swp2
    clag-id 2

auto swp3
iface swp3

auto node3
iface node3
    bond-slaves swp3
    clag-id 3 

auto swp4
iface swp4

auto node4
iface node4
    bond-slaves swp4
    clag-id 4 

auto swp5
iface swp5

auto node5
iface node5
    bond-slaves swp5
    clag-id 5 

auto swp6
iface swp6

auto node6
iface node6
    bond-slaves swp6
    clag-id 6 

auto swp7
iface swp7

auto node7
iface node7
    bond-slaves swp7
    clag-id 7 

auto swp8
iface swp8

auto node8
iface node8
    bond-slaves swp8
    clag-id 8 

auto swp9
iface swp9

auto node9
iface node9
    bond-slaves swp9
    clag-id 9 

auto swp10
iface swp10

auto node10
iface node10
    bond-slaves swp10
    clag-id 10 

auto swp11
iface swp11

auto node11
iface node11
    bond-slaves swp11
    clag-id 11 

auto swp12
iface swp12

auto node12
iface node12
    bond-slaves swp12
    clag-id 12

auto br0
iface br0
    bridge-ports node1 node2 node3 node4 node5 node6 node7 node8 node9 node10 node11 node12 peerlink
    address 10.217.184.1/24
    bridge-stp on

auto bridge
iface bridge
      bridge-vlan-aware yes
      bridge-ports glob swp1-53
      bridge-stp on
      bridge-vids 10 12 181 183 

